<template>
  <div class="meta-container flex-wrap" ref="content">
    <base-pdf-header
      applicationnumber="5427"
      formtitle="BUSINESS PERMIT AND LICENSING OFFICE"
      additionaltext="TAX YEAR ____"
    />
    <div class="meta-form-body">
      <!-- Application Date and Nos. -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-text w6 no-br no-bb">
          <div class="meta-label">Date of Application :</div>
          <div class="meta-value">August 09, 2020</div>
        </div>
        <div class="meta-text w6 no-bb">
          <div class="meta-label">DTI/SEC/CDA Registration No. :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w6 no-br no-bb">
          <div class="meta-label">Account No :</div>
          <div class="meta-value">0215453698</div>
        </div>
        <div class="meta-text w6 no-bb">
          <div class="meta-label">DTI/SEC/CDA Date of Registration No. :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w6 no-br no-bb">
          <div class="meta-label">Type of Organization :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w3 no-br no-bb">
          <div class="meta-label">CTC No. :</div>
          <div class="meta-value">1234</div>
        </div>
        <div class="meta-text w3 no-bb">
          <div class="meta-label">TIN :</div>
          <div class="meta-value">0215453698</div>
        </div>
        <div class="meta-text w6 no-br">
          <div class="meta-label">
            Are You enjoying tax incentive from any Government Entity ?
          </div>
          <div class="meta-value">Yes</div>
        </div>
        <div class="meta-text w6">
          <div class="meta-label">Please specify the entity :</div>
          <div class="meta-value">Lorem ipsum dolor</div>
        </div>
      </div>

      <!-- Name of Taxpayer/Corporate Name : -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-group-title">Name of Taxpayer/Corporate Name :</div>
        <div class="meta-text w4 no-br no-bb">
          <div class="meta-label">Last Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w4 no-br no-bb">
          <div class="meta-label">First Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w4 no-bb">
          <div class="meta-label">Middle Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w6 no-br">
          <div class="meta-label">Business Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w6">
          <div class="meta-label">Trade Name/Franchise :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
      </div>

      <!-- Name of President/Treasurer of Corporation : -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-group-title">
          Name of President/Treasurer of Corporation :
        </div>
        <div class="meta-text w4 no-br">
          <div class="meta-label">Last Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w4 no-br">
          <div class="meta-label">First Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w4">
          <div class="meta-label">Middle Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
      </div>

      <!-- Business Address -->
      <div class="meta-text-group flex-wrap w6">
        <div class="meta-group-title">Business Address :</div>
        <div class="meta-text no-br no-bb">
          <div class="meta-label">Complete Address :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text no-br no-bb">
          <div class="meta-label">Telephone No. & Mobile No. :</div>
          <div class="meta-value">012-4526 / 09422136582</div>
        </div>
        <div class="meta-text no-br no-bb">
          <div class="meta-label">Email Address :</div>
          <div class="meta-value">sampleemail@email.com</div>
        </div>
      </div>
      <!-- Owner Details -->
      <div class="meta-text-group flex-wrap w6">
        <div class="meta-group-title">Owner's Address :</div>
        <div class="meta-text no-bb">
          <div class="meta-label">Complete Address :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text no-bb">
          <div class="meta-label">Telephone No. & Mobile No. :</div>
          <div class="meta-value">012-4526 / 09422136582</div>
        </div>
        <div class="meta-text no-bb">
          <div class="meta-label">Email Address :</div>
          <div class="meta-value">sampleemail@email.com</div>
        </div>
      </div>

      <!-- Business Details -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-text no-bb">
          <div class="meta-label">Property Index Number (PIN) :</div>
          <div class="meta-value">021159</div>
        </div>
        <div class="meta-text w4 no-br">
          <div class="meta-label">Business Area (in sq m) :</div>
          <div class="meta-value">10,000 sqm</div>
        </div>
        <div class="meta-text w4 no-br">
          <div class="meta-label">Total No. of Employees :</div>
          <div class="meta-value">100</div>
        </div>
        <div class="meta-text w4">
          <div class="meta-label">
            No. of Employees residing in City/Municipality :
          </div>
          <div class="meta-value">10</div>
        </div>
      </div>

      <!-- Lessor Details -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-group-title">
          If Place of Business is Rented, please identify the following :
        </div>
        <div class="meta-text w6 no-br no-bb">
          <div class="meta-label">Lessor's Name :</div>
          <div class="meta-value">Lorem Ipsum Dolor</div>
        </div>
        <div class="meta-text w6 no-bb">
          <div class="meta-label">Gross Monthly Rental :</div>
          <div class="meta-value">10,000 sqm</div>
        </div>
        <div class="meta-text w4 no-br no-bb">
          <div class="meta-label">Last Name :</div>
          <div class="meta-value">Lorem Ipsum</div>
        </div>
        <div class="meta-text w4 no-br no-bb">
          <div class="meta-label">First Name :</div>
          <div class="meta-value">Dolor ipsum</div>
        </div>
        <div class="meta-text w4 no-bb">
          <div class="meta-label">Middle Name :</div>
          <div class="meta-value">Dolor</div>
        </div>
        <div class="meta-text no-bb">
          <div class="meta-label">Lessor's Address :</div>
          <div class="meta-value">
            Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum
          </div>
        </div>
        <div class="meta-text w6 no-br">
          <div class="meta-label">Telephone No. & Mobile No. :</div>
          <div class="meta-value">012-4526 / 09422136582</div>
        </div>
        <div class="meta-text w6">
          <div class="meta-label">Email Address :</div>
          <div class="meta-value">sampleemail@email.com</div>
        </div>
      </div>

      <!-- Business Activity -->
      <div class="meta-text-group flex-wrap">
        <div class="meta-group-title">Business Activity</div>
        <div class="meta-table-header flex-center">
          <div class="form-th code no-br">Code :</div>
          <div class="form-th line no-br">Line of Business</div>
          <div class="form-th units no-br">No. of Units</div>
          <div class="form-th sales">
            Gross Sales/Receipts (for Renewal)
            <div class="form-sub-th">
              <div class="form-th no-br no-bl no-bb">Essential :</div>
              <div class="form-th no-br no-bl no-bb">Non-Essential :</div>
            </div>
          </div>
        </div>
        <div class="meta-table-row flex-center">
          <div class="form-td code no-bt no-br">0125</div>
          <div class="form-td line no-bt no-br">Lorem Ipsum Lorem Ipsum</div>
          <div class="form-td units no-bt no-br">90</div>
          <div class="form-td sales no-bt no-br">Lorem Ipsum</div>
          <div class="form-td sales no-bt">Lorem Ipsum</div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import BasePdfHeader from "@/components/forms/BasePdfHeader";
import jsPDF from "jspdf";
import html2canvas from "html2canvas";
import {mapGetters} from "vuex"
export default {
  name: "DownloadableBusinessForm",
  components: {
    BasePdfHeader,
  },
    computed: {
    ...mapGetters(["printBusiness"]),
  },
  watch: {
    printBusiness: {
      deep: true,
      handler(status) {
        if (status) {
          this.generateReport();
          this.$store.commit('setPrintBusiness',false)
        }
      },
    },
  },
  methods: {
    generateReport() {
      const doc = new jsPDF("p", "mm", "a4");
      /** WITH CSS */
      var width = doc.internal.pageSize.getWidth();
      var height = doc.internal.pageSize.getHeight();
      var canvasElement = document.createElement("canvas");
      html2canvas(this.$refs.content, {
        canvas: canvasElement,
        width: 794,
        height: 1124,
      }).then(function(canvas) {
        console.log(canvas);
        const img = canvas.toDataURL("image/jpeg", 1);
        doc.addImage(img, "JPEG", 0, 0, width, height);
        console.log(width, height);
        doc.save("sample.pdf");
      });
    },
  },
};
</script>

<style lang="scss" scoped>
div.meta-container {
  width: 210mm;
  height: 297mm;
  background-color: #fff;
  div.meta-form-body {
    height: 100%;
    width: 100%;
    padding: 20px 30px;
    div.meta-text-group {
      width: 100%;
      div.meta-group-title {
        width: 100%;
        color: #2699fb;
        font-size: 10px;
        font-weight: bold;
        padding: 10px 0;
      }
      div.meta-text {
        width: 100%;
        color: #2b2b2b;
        font-size: 10px;
        line-height: 1.6;
        padding: 4px 10px;
        border: 1px solid;
        .meta-label {
          font-size: 10px;
          font-weight: bold;
        }
      }
      div.meta-text.w1 {
        width: calc(8.33% - 21.5px);
        float: left;
      }
      div.meta-text.w2 {
        width: calc(16.6% - 21.5px);
        float: left;
      }
      div.meta-text.w3 {
        width: calc(25% - 21.5px);
        float: left;
      }
      div.meta-text.w4 {
        width: calc(33.3333% - 21.5px);
        float: left;
      }
      div.meta-text.w6 {
        width: calc(50% - 21.5px);
        float: left;
      }
      div.meta-text.w7 {
        width: calc(58% - 21.5px);
        float: left;
      }

      div.meta-table-header {
        text-align: center;
        width: 100%;
        div.form-th {
          font-size: 10px;
          font-weight: bold;
          line-height: 1.6;
          height: 100%;
          border: 1px solid;

          display: flex;
          flex-wrap: wrap;
          align-items: center;
          justify-content: center;
        }
      }

      div.meta-table-row {
        text-align: center;
        width: 100%;
        div.form-td {
          font-size: 10px;
          line-height: 1.6;
          padding: 5px 0;
          border: 1px solid;
        }
      }
      div.form-th.code,
      div.form-td.code {
        width: calc(15% - 1.5px);
        float: left;
      }
      div.form-th.line,
      div.form-td.line {
        width: calc(35% - 1.5px);
        float: left;
      }
      div.form-th.units,
      div.form-td.units {
        width: calc(15% - 1.5px);
        float: left;
      }
      div.form-th.sales {
        width: calc(35% - 1.5px);
        float: left;
      }
      div.form-td.sales {
        width: calc(17.5% - 1px);
        float: left;
      }

      div.form-sub-th {
        width: 100%;
        div.form-th {
          width: calc(50% - 1.5px);
          float: left;
        }
      }
    }
    div.meta-text-group.w6 {
      width: 50%;
      float: left;
    }
  }
}

.no-bl {
  border-left: 0 !important;
}
.no-br {
  border-right: 0 !important;
}
.no-bt {
  border-top: 0 !important;
}
.no-bb {
  border-bottom: 0 !important;
}
</style>
